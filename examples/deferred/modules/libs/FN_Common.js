function each(e,t){for(var r=e.length,o=-1;++o<r&&t.call(e,e[o],o)!==!1;);return e}function ajax(e,t){return new Ajax(e,t)}!function(e,t){function r(){if(!s){s=!0;for(var e=0;e<n.length;e++)n[e].fn.call(window,n[e].ctx);n=[]}}function o(){"complete"===document.readyState&&r()}e=e||"docReady",t=t||window;var n=[],s=!1,l=!1;t[e]=function(e,t){return s?void setTimeout(function(){e(t)},1):(n.push({fn:e,ctx:t}),void("complete"===document.readyState?setTimeout(r,1):l||(document.addEventListener?(document.addEventListener("DOMContentLoaded",r,!1),window.addEventListener("load",r,!1)):(document.attachEvent("onreadystatechange",o),window.attachEvent("onload",r)),l=!0)))}}("docReady",window);var delay=function(){return"undefined"!=typeof setImmediate?setImmediate:"undefined"!=typeof process?process.nextTick:function(e){setTimeout(e,0)}}(),FN_Log=function(e){var t=this,r=null;this.initLoggly=function(e,t){r=t,t&&r.push({logglyKey:e})};var o=function(e){var t=null,r=arguments.length-1,o=0,n=arguments;return 0===r?t=e:e&&(t=e.replace(/(\{\})/g,function(){var e="{}";if(r>o){var s=n[o+1];try{e=void 0!==s&&null!==s&&"object"==typeof s?JSON.stringify(s):void 0===s||null===s?"<null>":s.toString()}catch(l){t=s}o++}return e})),t};this.logLevel=e||0,this.EXPORT_LOG=!0;var n=50,s=40,l=30,i=20,a=10,d=0;this.nullLogger=function(){};var u=null,f=function(e,t){u||(u=document.getElementById("logDiv")),u&&(u.innerHTML+='<div class="'+t+'Log">'+e+"</div>")};this.traceLoggerPlus=function(e){t.logLevel>=n&&(console.trace(e),f(e,"trace"))},this.logLoggerPlus=function(e){t.logLevel>=s&&(console.log(e),f(e,"log"))},this.infoLoggerPlus=function(e){t.logLevel>=l&&(console.info(e),f(e,"info"))},this.warnLoggerPlus=function(e){t.logLevel>=i&&(console.warn(e),f(e,"warn"),t.EXPORT_LOG&&r&&r.push({warn:{log:e,platformInfo:t.platformInfo}}))},this.errorLoggerPlus=function(e){t.logLevel>=a&&(console.error(e),f(e,"error"),t.EXPORT_LOG&&r&&r.push({error:{log:e,platformInfo:t.platformInfo}}))},window.onerror=function(e,r,o,n,s){var l={message:e,file:r,line:o,relLine:n};t.warn("FN_Log onerror: {}",l)},this.handleCatch=function(e,r){if(e=e||{},r=r||"",r+=" -- ErrorMessage "+e.message,e.stack){r+=e.stack.split("\n")[1];var o=e.stack.toString(),n=o.lastIndexOf(":")+1,s=o.substring(n);r+=" -- Line "+s}t.warn(r)},this.trace=function(e,r,n){var s=Array.prototype.slice.call(arguments);t.traceLogger(o.apply(this,s))},this.log=function(){var e=Array.prototype.slice.call(arguments);t.logLogger(o.apply(this,e))},this.info=function(e){var r=Array.prototype.slice.call(arguments);t.infoLogger(o.apply(this,r))},this.warn=function(){var e=Array.prototype.slice.call(arguments);t.warnLogger(o.apply(this,e))},this.error=function(){var e=Array.prototype.slice.call(arguments);t.errorLogger(o.apply(this,e))},this.debugLogger=this.log,this.traceLogger=this.log,this.infoLogger=this.log,this.warnLogger=this.log,this.errorLogger=this.log,console&&console.log&&this.logLevel!==d?(console.trace&&(this.traceLogger=this.traceLoggerPlus),console.log&&(this.logLogger=this.logLoggerPlus),console.info&&(this.infoLogger=this.infoLoggerPlus),console.warn&&(this.warnLogger=this.warnLoggerPlus),console.error&&(this.errorLogger=this.errorLoggerPlus)):(this.log=this.nullLogger,this.trace=this.nullLogger,this.info=this.nullLogger,this.warn=this.nullLogger,this.error=this.nullLogger)};"undefined"!=typeof exports?module.exports=FN_Log:"function"==typeof define?define(function(){return FN_Log}):window.FN_Log=FN_Log;var log=new FN_Log(40),Deferred=function(){var e=this;this.onDone=[],this.onAlways=[],this.onFail=[],this.state=Deferred.state.PENDING,this.promise=function(t){return e},this.always=function(t){return"function"==typeof t&&(e.state!==Deferred.state.PENDING&&delay(t(e.value,e.isResolved())),e.onAlways.push(t)),e},this.done=function(t){return"function"==typeof t&&(e.state===Deferred.state.SUCCESS&&delay(t(e.value,!0)),e.onDone.push(t)),e},e.fail=function(t){return"function"==typeof t&&(e.state===Deferred.state.FAILURE&&delay(t(e.value,!1)),e.onFail.push(t)),this},this.isRejected=function(){return e.state===Deferred.state.FAILURE},this.isResolved=function(){return e.state===Deferred.state.SUCCESS},this.reject=function(t){return e.state>Deferred.state.PENDING?e:(e.value=t,e.state=Deferred.state.FAILURE,e.process(),e)},this.resolve=function(t){return e.state>Deferred.state.PENDING?e:(e.value=t,e.state=Deferred.state.SUCCESS,e.process(t),e)},this.status=function(){var t=e.state,r=Deferred.status[t];return r},this.then=function(t,r){return e.done(t),e.fail(r),e},this.process=function(t){var r,o;if(e.state===Deferred.state.PENDING)return e;if(o=e.value||t,r=e.state===Deferred.state.SUCCESS,e.state===Deferred.state.SUCCESS)for(var n=e.onDone.length,s=0;n>s;s++)try{e.onDone[s](o,r)}catch(l){log.handleCatch(l,"Deferred onDone Fail")}if(e.state===Deferred.state.FAILURE)for(var i=e.onFail.length,a=0;i>a;a++)try{e.onFail[a](o,r)}catch(l){log.handleCatch(l,"Deferred onFail Fail")}for(var d=e.onAlways.length,u=0;d>u;u++)try{e.onAlways[u](o,r)}catch(l){log.handleCatch(l,"Deferred onAlways Fail")}return e}};Deferred.when=function(){var e,t=0,r=new Deferred,o=[].slice.call(arguments),n=null;return o[0]instanceof Array&&(o=o[0]),"function"==typeof arguments[1]&&(n=arguments[1]),e=o.length,0===e?r.resolve(null):each(o,function(s){s.then(function(){++t!==e||r.isResolved()||(o.length>1?(r.resolve(o.map(function(e){return e.value})),n&&n(o.map(function(e){return e.value}))):(r.resolve(o[0].value),n&&n(o[0].value)))},function(){r.isResolved()||(o.length>1?(r.reject(o.map(function(e){return e.value})),n&&n(o.map(function(e){return e.value}))):(r.reject(o[0].value),n&&n(o[0].value)))})}),r},Deferred.state={PENDING:0,FAILURE:1,SUCCESS:2},Deferred.status=["pending","rejected","resolved"],"undefined"!=typeof exports?module.exports=Deferred:"function"==typeof define?define(function(){return Deferred}):window.Deferred=Deferred;var DEFAULT_TIMEOUT=1e4,DEFAULT_METHOD="GET",DEFAULT_RETRY=5,DEFAULT_CONTENT_TYPE="application/x-www-form-urlencoded; charset=UTF-8",DEFAULT_DATA_TYPE="json",Ajax=function(e,t){e=e||{},t=t||0;var r=this;this.requestParams=e,this.onDone=[],this.onAlways=[],this.onFail=[],this.requestType=e.requestType,this.url=e.url,this.retry=e.maxRetry||DEFAULT_RETRY,this.xhr=new XMLHttpRequest;var o=(e.dataType||DEFAULT_DATA_TYPE,"GET"===e.method||"POST"===e.method?e.method:DEFAULT_METHOD),n=e.async||!0,s="";if(e.data){if("object"==typeof e.data)for(var l in e.data){var i=l+"="+encodeURIComponent(e.data[l]);"GET"===o&&-1!==this.url.indexOf(i)||(s.length>0&&(s+="&"),s+=i)}else"string"==typeof e.data&&(s=e.data);s.length>0&&"GET"===o&&(-1===this.url.indexOf("?")?this.url+="?":this.url+="&",this.url+=s)}if(this.xhr.open(o,this.url,n),this.contentType=e.contentType||DEFAULT_CONTENT_TYPE,(!e.headers||e.headers&&!e.headers["Content-Type"])&&this.xhr.setRequestHeader("Content-Type",this.contentType),e.headers){if("object"==typeof e.headers)for(var l in e.headers)this.xhr.setRequestHeader(l,e.headers[l]);e.headers["X-Requested-With"]||this.xhr.setRequestHeader("X-Requested-With","XMLHttpRequest")}this.statusCode=null,this.responseObj={};var a=e.responseType||e.dataType||DEFAULT_DATA_TYPE,d=!1;this.done=function(e){return"function"==typeof e&&r.onDone.push(e),this},this.success=this.done,this.fail=function(e){return"function"==typeof e&&r.onFail.push(e),this},this.always=function(e){return"function"==typeof e&&r.onAlways.push(e),this},e.error&&this.fail(e.error),e.success&&this.done(e.success),e.complete&&this.always(e.complete),this.resolveCompletedFile=function(e,t,o,n){var s=o;switch(a){case"json":try{"string"==typeof o?(o=o.replace(/(\r\n|\n|\r)/gm,""),s=JSON.parse(o)):s=o}catch(l){log.handleCatch(l,"fnAjax JSON.parse Fail: "+o),s=o}break;default:s=o}var i=function(){var e=r.onDone.length,t=0,o=r.onAlways.length;for(t=0;e>t;t++)r.onDone[t](s,n,r.requestType,r.xhr);for(t=0;o>t;t++)r.onAlways[t](s,n,r.requestType,r.xhr)};delay(i())},this.resolveFailFile=function(e,t){var o=function(){var e=r.onFail.length,o=0,n=r.onAlways.length,s=t;for(o=0;e>o;o++)r.onFail[o](s,r.requestType,r.xhr);for(o=0;n>o;o++)r.onAlways[o](s,r.requestType,r.xhr)};d||(d=!0,delay(o()))};var u=function(){for(var e={},t=r.xhr.getAllResponseHeaders().split("\n"),o=t.length,n=0;o>n;n++)if(t[n].length>0){var s=t[n].indexOf(":");if(s>0){var l=t[n].substring(0,s),i=t[n].substring(s+1).trim();e[l]=i}}return e};if(this.xhr.onreadystatechange=function(){if(r.statusCode=r.xhr.status,4===r.xhr.readyState&&200===r.xhr.status){r.responseObj={url:r.url,status:r.xhr.status,responseText:r.xhr.responseText,requestType:r.requestType};var t=u();r.resolveCompletedFile(r.url,r.xhr.status,r.xhr.responseText,t)}else if(200!==r.xhr.status&&0!==r.xhr.status){var o=null;switch(r.xhr.status){case 404:o="NotFound";break;default:o="unknown"}r.resolveFailFile({},{errorType:o,status:r.xhr.status,requestType:r.requestType,requestParams:e})}},this.xhr.timeout=e.timeout||DEFAULT_TIMEOUT,this.xhr.ontimeout=function(o){t<=r.retry?(t++,e.timeout=r.xhr.timeout+1e3*t,delay(function(){var n=ajax(e,t);n.fail(function(e){r.resolveFailFile(o,{errorType:"xhrTimeout"})}),n.done(function(e,t,o,n){r.resolveCompletedFile(n,o,e)})})):r.resolveFailFile(o,{errorType:"xhrTimeout"})},this.xhr.onabort=function(e){r.resolveFailFile(e,{errorType:"xhrAbort"})},this.xhr.onerror=function(t){r.resolveFailFile(t,{errorType:"xhrError",status:r.xhr.status,requestType:r.requestType,requestParams:e})},"GET"===o)this.xhr.send(null);else{var f=s.length>0?s:null;this.xhr.send(f)}return this};Ajax.prototype.constructor=Ajax,"undefined"!=typeof exports?module.exports=ajax:"function"==typeof define?define(function(){return ajax}):window.ajax=ajax;var ModRewrite=function(e){for(var t=e,r=ModRewrite.fileRules.length,o=0;r>o;o++){var n=ModRewrite.fileRules[o];if("string"==typeof n.id)n.id===t&&(t=n.callback(t));else if("object"==typeof n.id)try{var s=n.id.test(t);s&&(t=n.callback(t))}catch(l){}}var i=!1;if(ModRewrite.extensions.length>0)for(var a=ModRewrite.extensions.length,d=0;a>d;d++){var u=ModRewrite.extensions[d]+"!";if(-1!==t.indexOf(u)){t=t.replace(u,""),t+="."+ModRewrite.extensions[d],i=!0;break}}return-1===t.indexOf("http")?(ModRewrite.baseUrl&&ModRewrite.baseUrl.length>0&&((-1===ModRewrite.baseUrl.indexOf("/")||ModRewrite.baseUrl.length>1&&ModRewrite.baseUrl.indexOf("/")+1!==ModRewrite.baseUrl.length)&&(ModRewrite.baseUrl+="/"),t=ModRewrite.baseUrl+t),ModRewrite.useHost&&-1===t.indexOf(ModRewrite.useHost)&&(t=ModRewrite.useHost+t)):".js"===t.substr(t.length-3,3)&&(i=!0),i||(t+=".js"),t};ModRewrite.fileRules=[],ModRewrite.extensions=[],ModRewrite.exports={},ModRewrite.addExtensionRule=function(e){ModRewrite.extensions.push(e)},ModRewrite.addFileRule=function(e,t){ModRewrite.fileRules.push({id:e,callback:t})},ModRewrite.setExports=function(e,t){ModRewrite.exports[e]=t},ModRewrite.baseUrl="","undefined"!=typeof exports?module.exports=ModRewrite:"function"==typeof define?define(function(){return ModRewrite}):window.ModRewrite=ModRewrite,function(global){"use strict";var __modules__={},__loading__={},require=function(moduleIds,callback,errorCallBack,local){var deferred=null;local=local||!1,callback="function"==typeof callback?callback:null,errorCallBack="function"==typeof errorCallBack?errorCallBack:null;var createModule=function(moduleId){var deferredMod=new Deferred;__loading__[moduleId]=deferredMod;var module={exports:{}},exports={};module.moduleId=moduleId;var path=ModRewrite(moduleId);module.path=path,module.loaded=!1;var getExports=function(result){var processMod=function(){if(-1!==moduleId.indexOf("!")&&"string"==typeof result)if(-1!==moduleId.indexOf("json!")||-1!==moduleId.indexOf("!json"))try{module.exports=JSON.parse(result)}catch(e){console.warn(e.message),log.handleCatch(e,"require createModule getExports processMod: "+moduleId)}else module.exports=result;else if(-1!==result.indexOf("module.exports"))try{var evalFn=eval(result)}catch(e){module.exports=result,log.handleCatch(e,"require createModule getExports processMod: "+moduleId)}else if(ModRewrite.exports[moduleId])try{var evalFn=eval(result);window[ModRewrite.exports[moduleId]]?module.exports=window[ModRewrite.exports[moduleId]]:this[ModRewrite.exports[moduleId]]?module.exports=this[ModRewrite.exports[moduleId]]:module.exports=result}catch(e){log.handleCatch(e,"require createModule getExports processMod: "+moduleId),module.exports=result}else{try{eval(result)}catch(e){log.handleCatch(e,"require createModule getExports processMod: "+moduleId)}module.exports=result}module.loaded=!0,__modules__[moduleId]=module,deferredMod.resolve(module.exports),callback&&"function"==typeof callback&&callback(module.exports)};if(-1!==result.indexOf("require")){for(var regexp=/require\(/g,match,matches=[];null!==(match=regexp.exec(result));)matches.push(match.index);for(var dependencies=[],matchLen=matches.length,m=0;matchLen>m;m++){var end=result.substr(matches[m]).indexOf(")"),lib=result.substr(matches[m]+8,end-8);if(0===lib.indexOf('"')&&'"'===lib.substr(lib.length-1)){lib=lib.split('"').join("");var load=require(lib);load instanceof Deferred&&dependencies.push(load)}}dependencies&&dependencies.length>0?Deferred.when(dependencies,function(){processMod()}):processMod()}else processMod()};return ajax({url:path,method:"GET",contentType:"text/plain",dataType:"text"}).done(function(e){getExports(e)}).fail(function(e){log.warn("require ajax FAILED to load Path: "+path+" - {}",e),deferredMod.reject(e)}),deferredMod};if("string"==typeof moduleIds)if(__modules__[moduleIds]&&__modules__[moduleIds].exports)deferred=__modules__[moduleIds].exports;else if(local)deferred=null;else if(__loading__[moduleIds])deferred=__loading__[moduleIds],deferred.done(function(e){deferred.resolve(e)});else{deferred=new Deferred;var create=createModule(moduleIds);create.done(function(e){deferred.resolve(e)}),create.fail(function(e){e.moduleId=moduleIds,deferred.reject(e)})}else if(moduleIds instanceof Array){deferred=new Deferred;for(var defArr=[],len=moduleIds.length,i=0;len>i;i++){var lib=moduleIds[i],load=require(lib);load instanceof Deferred&&defArr.push(load)}Deferred.when(defArr,function(e){delay(function(){for(var e={},t=0;len>t;t++){var r=require(moduleIds[t]);r instanceof Deferred?log.warn("FN_CommonJS - Error loading Module: "+moduleIds[t]):e[moduleIds[t]]=r}deferred.resolve(e),callback&&"function"==typeof callback&&callback(e)})})}return deferred},define=function(e,t){__modules__[e]={exports:t}},requireLocal=function(e){return __modules__[e]?__modules__[e].exports:null};docReady(function(){define("Deferred",Deferred),define("ajax",ajax),define("Ajax",ajax),define("FN_Log",FN_Log);for(var e=function(){return document.getElementsByTagName("script")},t=null,r=e(),o=r.length,n=0;o>n;n++)if(t=r[n].getAttribute("data-main")){require(t);break}})}(this);